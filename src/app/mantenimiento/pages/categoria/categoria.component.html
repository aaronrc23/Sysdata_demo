<h2 class="title ml-3">Categorias</h2>
<br />
<div class="sub-card bg-white mx-3">
    <form (ngSubmit)="crearCategoria()" #categoriaForm="ngForm">
        <div class="card1">
            <div class="card flex p-3 mt-1">
                <p-button (click)="showDialog()" icon="pi pi-plus" label="Agregar"
                    styleClass="custom-button"></p-button>
                <p-dialog header="Agregar Categoria" [(visible)]="visible" [breakpoints]="{ '960px': '95vw' }"[position]="'top'" 
                    [modal]="true" [style]="{ width: '50vw' }" [draggable]="false" [resizable]="false">

                    <div class="inputgroup ">
                        <div class="card flex  flex-column ">
                            <p>Nombre de Categoria</p>
                            <input pInputText type="text" placeholder="Ingrese el nombre"
                                [(ngModel)]="nuevaCategoria.nombre" name="nombre" required #nombreInput />
                        </div>
                        <!----------Checkbox------------>
                        <div class="contd">
                            <input type="checkbox" [(ngModel)]="nuevaCategoria.activo" name="activo" required hidden />
                        </div>
                        <div class="mt-3 flex justify-content-center">
                            <button type="submit" pButton pRipple label="Crear Categoría" class="p-button-success "
                                [disabled]="categoriaForm.invalid"></button>
                        </div>

                    </div>
                </p-dialog>

            </div>
        </div>
    </form>
    <div class="card-table mx-2">
        <p-table [value]="categorias" [tableStyle]="{ 'min-width': '10rem' } "  [resizableColumns]="true"
            [paginator]="true" [rows]="5" [showCurrentPageReport]="true" scrollHeight="600px"
            currentPageReportTemplate="Mostrar {first} a {last} de {totalRecords} registros" 
            (onPage)="pageChange($event)" [rowsPerPageOptions]="[10, 25, 50]" styleClass="p-datatable-gridlines"
            [scrollable]="true">
            <ng-template pTemplate="header" class="header1">
                <tr class="ui-table-header ">
                    <th pSortableColumn="code" style="width:20%">Codigo <p-sortIcon field="code"></p-sortIcon></th>
                    <th pSortableColumn="name" style="width:20%">Nombre <p-sortIcon field="name"></p-sortIcon></th>
                    <th pSortableColumn="category" style="width:20%">Estado <p-sortIcon field="estado"></p-sortIcon></th>
                    <th pSortableColumn="quantity" style="width:20%">Opciones <p-sortIcon field="opciones"></p-sortIcon></th>
                 
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-categoria>
                <tr class="ui-table-contenido  ">
                    <td>{{ categoria.idcategoria }}</td>
                    <td>{{ categoria.nombre }}</td>
                    <td>{{ categoria.activo ? 'Activo' : 'Inactivo' }}</td>

                    <td>
                        <div class="flex justify-content-center">
                            <!-- Modificación en el botón "Editar" dentro de la tabla -->
                            <p-button label="Editar" icon="pi pi-pencil" styleClass="btn-edit"
                                (click)="editarCategoria(categoria)"></p-button>

                            <p-button label="Eliminar" icon="pi pi-trash" styleClass="btn-delete"
                                (click)="eliminarCategoria(categoria)"></p-button>
                        </div>
                    </td>

                </tr>
            </ng-template>
        </p-table>
    </div>

</div>

<!-- Después del formulario de creación, antes del formulario de actualización -->
<p-dialog header="Editar Categoria" [(visible)]="mostrarModalEdicion" [breakpoints]="{ '960px': '80vw' }" [modal]="true" [position]="'top'"
    [style]="{ width: '50vw' }" [draggable]="false" [resizable]="false">
    <!-- Contenido del formulario de actualización -->
    <form (ngSubmit)="actualizarCategoria()" #categoriasForm="ngForm">
        <div class="inputgroup">
            <div class="card flex flex-column">
                <p>Editar de Categoria</p>
                <input pInputText type="text" placeholder="Ingrese el nombre" [(ngModel)]="categoriaEnEdicion.nombre"
                    name="nombre" #nombreInput />

            </div>
            <!-- ... otros campos del formulario ... -->
            <div class="mt-3 flex justify-content-center headereditar">
                <button type="submit" pButton pRipple label="Actualizar Categoría" class="p-button-success mb-2"
                    [disabled]="categoriasForm.invalid"></button>
                <button type="button" pButton pRipple label="Cerrar" class="p-button-danger ml-1 mb-2"
                    (click)="mostrarModalEdicion = false"></button>
            </div>
        </div>
    </form>
</p-dialog>


