<h3 class="titulo  -mt-2">Proveedores</h3>
<br />
<div class="sub-card">
    <form (ngSubmit)="crearUnidad()" #unidadForm="ngForm">
        <div class="card1">
            <div class="card flex p-3 mt-1">
                <p-button (click)="showDialog('top')" icon="pi pi-plus" label="Agregar"
                    styleClass="custom-button"></p-button>
                <p-dialog header="Registrar " [(visible)]="visible" [position]="'top'"
                    [breakpoints]="{ '960px': '97vw' }" [modal]="true" [style]="{ width: '50vw' }" [draggable]="false"
                    [resizable]="false">

                    <div class="inputgroup bg-gray ">

                        <div class="card flex  flex-column ">
                            <p>Nombre</p>
                            <input pInputText type="text" placeholder="Ingrese el nombre"
                                [(ngModel)]="nuevaProveedor.nombre_prov" name="nombre" />
                        </div>
                        <div class="card flex  flex-column ">
                            <p>Direccion</p>
                            <input pInputText type="text" placeholder="Ingrese direccion nombre" id="direccion"
                                [(ngModel)]="nuevaProveedor.direccion" name="direccion" />
                        </div>
                        <div class="card flex  flex-column ">
                            <p>Nº Ruc</p>
                            <input pInputText type="text" placeholder="Ingrese ruc del proveedor " id="numruc"
                                [(ngModel)]="nuevaProveedor.numruc" name="numruc" pattern="[0-9]*"
                                #numrucInput="ngModel" required />

                        </div>


                        <div class="card flex  flex-column ">
                            <p>Telefono</p>
                            <input pInputText type="number" placeholder="Ingrese ruc del proveedor " id="telefono"
                                [(ngModel)]="nuevaProveedor.telefono" name="telefono" required #nombreInput />

                        </div>


                        <div class="card flex  flex-column ">
                            <p>Email</p>
                            <input pInputText type="text" placeholder="Ingrese correo electronico" id="email"
                                [(ngModel)]="nuevaProveedor.email" name="email" />
                        </div>
                        <!----------Checkbox------------>
                        <div class="contd">
                            <input type="checkbox" [(ngModel)]="nuevaProveedor.activo" name="activo" required hidden />

                        </div>
                        <div class="mt-3 flex justify-content-center">
                            <button type="submit" pButton pRipple label="Crear Categoría" class="p-button-success "
                                [disabled]="unidadForm.invalid"></button>
                        </div>

                    </div>
                </p-dialog>

            </div>
        </div>
    </form>

</div>


<div class="card-table">
    <p-table [value]="proveedor" [tableStyle]="{ 'min-width': '10rem' } " [resizableColumns]="true" [paginator]="true"
        [rows]="5" [showCurrentPageReport]="true" scrollHeight="600px"
        currentPageReportTemplate="Mostrar {first} a {last} de {totalRecords} registros" (onPage)="pageChange($event)"
        [rowsPerPageOptions]="[10, 25, 50]" styleClass="p-datatable-gridlines" [scrollable]="true">
        <ng-template pTemplate="header" class="header1">
            <tr class="ui-table-header ">
                <th pSortableColumn="code" style="width:20%">Codigo <p-sortIcon field="code"></p-sortIcon></th>
                <th pSortableColumn="name" style="width:20%">Proveedor <p-sortIcon field="name"></p-sortIcon></th>
                <th pSortableColumn="ruc" style="width:20%">Nº Ruc <p-sortIcon field="ruc"></p-sortIcon></th>
                <th pSortableColumn="direccion" style="width:20%">direccion<p-sortIcon field="direccion"></p-sortIcon>
                </th>

                <th pSortableColumn="Telefono" style="width:20%">Telefono<p-sortIcon field="telefono"></p-sortIcon></th>
                <th pSortableColumn="email" style="width:20%">emil<p-sortIcon field="email"></p-sortIcon></th>
                <th pSortableColumn="category" style="width:20%">Estado <p-sortIcon field="estado"></p-sortIcon></th>
                <th pSortableColumn="quantity" style="width:20%">Opciones <p-sortIcon field="opciones"></p-sortIcon>
                </th>

            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-unidad>
            <tr class="ui-table-contenido  ">
                <td>{{ unidad.id_proveedores }}</td>
                <td>{{ unidad.nombre_prov }}</td>
                <td>{{ unidad.numruc }}</td>
                <td>{{ unidad.direccion }}</td>
                <td>{{ unidad.telefono }}</td>
                <td>{{ unidad.email }}</td>
                <td>{{ unidad.activo ? 'Activo' : 'Inactivo' }}</td>

                <td>
                    <div class="flex justify-content-center">
                        <!-- Modificación en el botón "Editar" dentro de la tabla -->
                        <p-button label="Editar" icon="pi pi-pencil" styleClass="btn-edit"
                            (click)="editarUnidad(unidad)"></p-button>

                        <p-button label="Eliminar" icon="pi pi-trash" styleClass="btn-delete"
                            (click)="eliminarUnidad(unidad)"></p-button>
                    </div>
                </td>

            </tr>
        </ng-template>
    </p-table>
</div>



<!-- Después del formulario de creación, antes del formulario de actualización -->
<p-dialog header="Editar Unidad de Medida" [(visible)]="mostrarModalEdicion" [breakpoints]="{ '960px': '95vw' }"
    [modal]="true" [position]="'top'" [style]="{ width: '50vw' }" [draggable]="false" [resizable]="false">
    <!-- Contenido del formulario de actualización -->
    <form (ngSubmit)="actualizarUnidad()" #categoriasForm="ngForm">
        <div class="inputgroup">


            <div class="card flex  flex-column ">
                <p>Nombre</p>
                <input pInputText type="text" placeholder="Ingrese el nombre" [(ngModel)]="edicionProveedor.nombre_prov"
                    name="nombre" #nombreInput />
            </div>
            <div class="card flex  flex-column ">
                <p>Direccion</p>
                <input pInputText type="text" placeholder="Ingrese direccion " id="direccion"
                    [(ngModel)]="edicionProveedor.direccion" name="direccion" />
            </div>
            <div class="card flex  flex-column ">
                <p>Nº de ruc</p>
                <input pInputText type="number" placeholder="Ingrese numero de ruc" id="numruc"
                    [(ngModel)]="edicionProveedor.numruc" name="numruc" required />

            </div>

            <div class="card flex  flex-column ">
                <p>Telefono</p>
                <input pInputText type="number" placeholder="Ingrese Telefono" id="telefono"
                    [(ngModel)]="edicionProveedor.telefono" name="telefono" required />

            </div>

            <div class="card flex  flex-column ">
                <p>Email</p>
                <input pInputText type="text" placeholder="Ingrese correo electronico" id="email"
                    [(ngModel)]="edicionProveedor.email" name="email" />
            </div>
            <!----------Checkbox------------>
            <div class="contd mt-3 flex align-items-center">
                <p-inputSwitch [(ngModel)]="edicionProveedor.activo" name="estadoproveedor"
                    (ngModelChange)="onSwitchChange($event)"></p-inputSwitch>
                <p class="ml-2 flex align-items-center">{{ edicionProveedor.activo ? 'Activado' : 'Desactivado' }}</p>
            </div>



            <!-- ... otros campos del formulario ... -->
            <div class="mt-3 flex justify-content-center headereditar">
                <button type="submit" pButton pRipple label="Actualizar Categoría" class="p-button-success mb-2"
                    [disabled]="categoriasForm.invalid"></button>
                <button type="button" pButton pRipple label="Cerrar" class="p-button-danger ml-1 mb-2"
                    (click)="mostrarModalEdicion = false"></button>
            </div>
        </div>
    </form>
</p-dialog>